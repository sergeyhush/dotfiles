[ -f ~/.localrc ] && source ~/.localrc
[ -f ~/.local_aliases ] && source ~/.local_aliases

# nvm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion

export BINUTILS=/opt/homebrew/opt/binutils/bin
export ULSBIN=/usr/local/sbin
export HOMEBREWBIN=/opt/homebrew/bin
export DISABLE_LS_COLORS=true

# FZF
if (( $+commands[fd] )); then
  export FZF_DEFAULT_COMMAND="fd --type file --follow --hidden --exclude .git . $HOME/work/src"
  export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
  export FZF_ALT_C_COMMAND="fd -t d --hidden --follow --exclude \".git\" . $HOME/work/src"
fi

# Golang
export GOPATH=$HOME/go
export GOBIN=$GOPATH/bin

# tfenv
export TFENV_ARCH=amd64

# pyenv
export PYENV_ROOT="$HOME/.pyenv"
export PYENV_BIN="$PYENV_ROOT/bin"
eval "$(pyenv init --path)"

export PATH="$GOBIN:$ULSBIN:$HOMEBREWBIN:$BINUTILS:$PYENV_BIN:$PATH"

# oh-my-zsh
export ZSH="$HOME/.oh-my-zsh"
if [ -z "$INTELLIJ_ENVIRONMENT_READER" ]; then
  export ZSH_TMUX_AUTOSTART=true
fi

plugins=(
    alias-tips
    aws
    common-aliases
    fd
    fzf
    gh
    git
    golang
    kubectl
    pyenv
    ssh-agent
    terraform
    tmux
    vi-mode
    zoxide
    zsh-autosuggestions
    zsh-completions
    zsh-syntax-highlighting
)
source "${ZSH}/oh-my-zsh.sh"

zstyle ':completion:*' fzf-search-display true

fpath=(~/.zsh/functions $fpath)
autoload -Uz $fpath[1]/*(.:t)

config_files=(~/.zsh/aliases/*.zsh(N))
for file in ${config_files}
do
    source $file
done
unset config_files
setopt inc_append_history

HISTSIZE=99999
HISTFILESIZE=99999
SAVEHIST=$HISTSIZE

eval "$(starship init zsh)"
eval "$(atuin init zsh)"

# do not need this one
unalias t
